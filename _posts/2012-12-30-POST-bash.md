---
category: cURL
path: '/api/chat'
title: 'POST streaming chat with Bash'
type: 'POST'
layout: null
---

This method allows users to send messages via cURL and receive streaming AI responses in the terminal.

### Request

* **Endpoint:** `https://ai.callaback.workers.dev/api/chat`
* **Method:** `POST`
* **Headers:** `Content-Type: application/json`
* **Body:**
```json
{
  "messages": [
    { "role": "user", "content": "Your message here" }
  ]
}
```

### Response

Returns a streaming response with Server-Sent Events (SSE).

**Status:** `200 OK`

**Stream format:**
```
data: {"response":"Hello"}
data: {"response":" there"}
data: [DONE]
```

### Single Request Example
```bash
echo '{"messages":[{"role":"user","content":"Hello"}]}' | \
curl -s -X POST https://ai.callaback.workers.dev/api/chat \
  -H "Content-Type: application/json" \
  -d @- \
  --no-buffer | \
  grep -Eo '"response":"[^"]*"' | \
  sed 's/"response":"//g; s/"//g' | \
  tr -d '\n'
```

### Multiple Questions Test Script
```bash
#!/bin/bash

# Test all three questions in one command
for q in "Hello" "What is 2+2?" "Tell me a joke"; do
  echo -e "\nQ: $q â†’ A: "
  echo "{\"messages\":[{\"role\":\"user\",\"content\":\"$q\"}]}" | \
  curl -s -X POST https://ai.callaback.workers.dev/api/chat \
    -H "Content-Type: application/json" \
    -d @- \
    --no-buffer | \
    grep -Eo '"response":"[^"]*"' | \
    sed 's/"response":"//g; s/"//g' | \
    tr -d '\n'
  echo ""
done
```

### Usage

Save as `test-chat.sh` and run:
```bash
chmod +x test-chat.sh
./test-chat.sh
```

Or run directly:
```bash
bash test-chat.sh
```

### Response Parsing

The script extracts responses using:
- `grep -Eo '"response":"[^"]*"'` - Extract JSON response fields
- `sed 's/"response":"//g; s/"//g'` - Remove JSON formatting
- `tr -d '\n'` - Join chunks into continuous output

For error responses, see the [response status codes documentation](#response-status-codes).
